---
type: code
status: in_progress
target_files:
- src/bun.js/modules/NodeModuleModule.cpp
- test/regression/issue/23898.test.ts
---
# Implement node:module findPackageJSON function - GitHub #23898

## Problem

`findPackageJSON` is not exported from `node:module`, causing:
```
SyntaxError: Export named 'findPackageJSON' not found in module 'node:module'.
```

## Solution

Implement `findPackageJSON(specifier, base)` that:
1. Resolves the specifier relative to base (like import.meta.url)
2. Walks up the directory tree to find the nearest package.json
3. Returns the path to package.json or undefined if not found

Node.js API:
```js
import { findPackageJSON } from 'node:module';
findPackageJSON('lodash', import.meta.url); // '/path/to/node_modules/lodash/package.json'
findPackageJSON('..', import.meta.url);      // '/path/to/parent/package.json'
```

## Implementation

1. Add `jsFunctionFindPackageJSON` in NodeModuleModule.cpp
2. Add to the lookup table at line ~896
3. Logic: resolve specifier, then walk up finding package.json

## Acceptance Criteria

- [x] Add findPackageJSON function to NodeModuleModule.cpp
- [x] Add to nodeModuleObjectTable lookup table
- [x] Function resolves specifier relative to base URL
- [x] Function walks up directories to find package.json
- [x] Returns undefined if no package.json found
- [x] Create regression test at test/regression/issue/23898.test.ts