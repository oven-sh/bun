{
  // Notes:
  // - BUN_GARBAGE_COLLECTOR_LEVEL=2 forces GC to run after every `expect()`, but is slower
  // - BUN_DEBUG_QUIET_LOGS=1 disables the debug logs
  // - FORCE_COLOR=1 forces colors in the terminal
  // - "${workspaceFolder}/test" is the cwd for `bun test` so it matches CI, we should fix this later
  // - "cppvsdbg" is used instead of "lldb" on Windows, because "lldb" is too slow
  "version": "0.2.0",
  "configurations": [
    // bun test [file]
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [file]",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [file] --only",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "--only", "${file}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "1",
        "BUN_DEBUG_jest": "1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "name": "Attach",
      "request": "attach",
      "pid": "${command:pickMyProcess}",
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [file] (fast)",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "0",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [file] (verbose)",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "0",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [file] --watch",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "--watch", "${file}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [file] --hot",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "--hot", "${file}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [file] --inspect",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
        "BUN_INSPECT": "ws://localhost:0/?wait=1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [file] --inspect-brk",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
        "BUN_INSPECT": "ws://localhost:0/?break=1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    // bun run [file]
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun run [file]",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "env": {
        "FORCE_COLOR": "0",
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun run [file] (fast)",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "0",
        "BUN_DEBUG_IncrementalGraph": "1",
        "BUN_DEBUG_Bake": "1",
        "BUN_DEBUG_reload_file_list": "1",
        "GOMAXPROCS": "1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun run [file] (verbose)",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "0",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun run [file] --watch",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["run", "--watch", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "env": {
        // "BUN_DEBUG_DEBUGGER": "1",
        // "BUN_DEBUG_INTERNAL_DEBUGGER": "1",
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
        // "BUN_INSPECT": "ws+unix:///var/folders/jk/8fzl9l5119598vsqrmphsw7m0000gn/T/tl15npi7qtf.sock?report=1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun run [file] --hot",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["run", "--hot", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun run [file] --inspect",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "env": {
        "FORCE_COLOR": "0",
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
        "BUN_INSPECT": "ws://localhost:0/?wait=1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun run [file] --inspect-brk",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "env": {
        "FORCE_COLOR": "0",
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
        "BUN_INSPECT": "ws://localhost:0/?break=1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    // bun test [...]
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [...]",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [...] (fast)",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "0",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [...] (verbose)",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [...] --watch",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "--watch", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [...] --hot",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "--hot", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [...] --inspect",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
        "BUN_INSPECT": "ws://localhost:0/?wait=1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [...] --inspect-brk",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_DEBUG_jest": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
        "BUN_INSPECT": "ws://localhost:0/?break=1",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    // bun exec [...]
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun exec [...]",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["exec", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    // bun test [*]
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [*]",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [*] (fast)",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "0",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [*] --inspect",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["test"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
        "BUN_INSPECT": "ws://localhost:0/",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun install [folder]",
      "program": "${workspaceFolder}/build/debug/bun-debug",
      "args": ["install"],
      "cwd": "${fileDirname}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    {
      "type": "lldb",
      "request": "launch",
      "name": "bun test [*] (ci)",
      "program": "node",
      "args": ["test/runner.node.mjs"],
      "cwd": "${workspaceFolder}",
      "env": {
        "BUN_DEBUG_QUIET_LOGS": "1",
        "BUN_GARBAGE_COLLECTOR_LEVEL": "2",
      },
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
    // Windows: bun test [file]
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [file]",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "1",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test --only [file]",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "--only", "${file}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [file] (fast)",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "0",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [file] (verbose)",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "0",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [file] --inspect",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
        {
          "name": "BUN_INSPECT",
          "value": "ws://localhost:0/?wait=1",
        },
      ],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [file] --inspect-brk",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${file}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
        {
          "name": "BUN_INSPECT",
          "value": "ws://localhost:0/?break=1",
        },
      ],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    // Windows: bun run [file]
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun run [file]",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun install",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["install"],
      "cwd": "${fileDirname}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "0",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun run [file] (verbose)",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun run [file] --inspect",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
        {
          "name": "BUN_INSPECT",
          "value": "ws://localhost:0/?wait=1",
        },
      ],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun run [file] --inspect-brk",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["run", "${fileBasename}"],
      "cwd": "${fileDirname}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
        {
          "name": "BUN_INSPECT",
          "value": "ws://localhost:0/?break=1",
        },
      ],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    // Windows: bun test [...]
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [...]",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [...] (fast)",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "0",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [...] (verbose)",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "0",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [...] --watch",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "--watch", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [...] --hot",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "--hot", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [...] --inspect",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
        {
          "name": "BUN_INSPECT",
          "value": "ws://localhost:0/?wait=1",
        },
      ],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [...] --inspect-brk",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
        {
          "name": "BUN_INSPECT",
          "value": "ws://localhost:0/?break=1",
        },
      ],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    // Windows: bun exec [...]
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun exec [...]",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["exec", "${input:testName}"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    // Windows: bun test [*]
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [*]",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [*] (fast)",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "0",
        },
      ],
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [*] --inspect",
      "program": "${workspaceFolder}/build/debug/bun-debug.exe",
      "args": ["test"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
        {
          "name": "BUN_INSPECT",
          "value": "ws://localhost:0/",
        },
      ],
      "serverReadyAction": {
        "pattern": "https://debug.bun.sh/#localhost:([0-9]+)/",
        "uriFormat": "https://debug.bun.sh/#ws://localhost:%s/",
        "action": "openExternally",
      },
    },
    {
      "type": "cppvsdbg",
      "sourceFileMap": {
        "D:\\a\\WebKit\\WebKit\\Source": "${workspaceFolder}\\src\\bun.js\\WebKit\\Source",
      },
      "request": "launch",
      "name": "Windows: bun test [*] (ci)",
      "program": "node",
      "args": ["test/runner.node.mjs"],
      "cwd": "${workspaceFolder}",
      "environment": [
        {
          "name": "BUN_DEBUG_QUIET_LOGS",
          "value": "1",
        },
        {
          "name": "BUN_DEBUG_jest",
          "value": "1",
        },
        {
          "name": "BUN_GARBAGE_COLLECTOR_LEVEL",
          "value": "2",
        },
      ],
      "console": "internalConsole",
      // Don't pause when the GC runs while the debugger is open.
      "postRunCommands": ["command source '${workspaceFolder}/misctools/lldb/lldb_commands'"],
    },
  ],
  "inputs": [
    {
      "id": "commandLine",
      "type": "promptString",
      "description": "Usage: bun [...]",
    },
    {
      "id": "testName",
      "type": "promptString",
      "description": "Usage: bun test [...]",
    },
  ],
}
