{
  "private": true,
  "scripts": {
    "bootstrap": "brew install gh jq cirruslabs/cli/tart cirruslabs/cli/sshpass hashicorp/tap/packer && packer init darwin",
    "login": "token=$(gh auth token); username=$(gh api user --jq .login); echo \"Login as $username...\"; echo \"$token\" | tart login ghcr.io --username \"$username\" --password-stdin; echo \"$token\" | docker login ghcr.io --username \"$username\" --password-stdin",
    "fetch:image-name": "echo ghcr.io/oven-sh/bun-vm",
    "fetch:darwin-version": "echo 1",
    "fetch:macos-version": "sw_vers -productVersion | cut -d. -f1",
    "fetch:script-version": "cat ../scripts/bootstrap.sh | grep 'v=' | sed 's/v=\"//;s/\"//' | head -n 1",
    "build:linux-aarch64-debian-12": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/debian:12 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-debian-12-v$(bun fetch:script-version)\" ../",
    "build:linux-aarch64-debian-11": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/debian:11 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-debian-11-v$(bun fetch:script-version)\" ../",
    "build:linux-aarch64-debian-10": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/debian:10 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-debian-10-v$(bun fetch:script-version)\" ../",
    "build:linux-aarch64-ubuntu-2404": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/ubuntu:24.04 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-ubuntu-2404-v$(bun fetch:script-version)\" ../",
    "build:linux-aarch64-ubuntu-2204": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/ubuntu:22.04 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-ubuntu-2204-v$(bun fetch:script-version)\" ../",
    "build:linux-aarch64-ubuntu-2004": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/ubuntu:20.04 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-ubuntu-2004-v$(bun fetch:script-version)\" ../",
    "build:linux-aarch64-ubuntu-1804": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/ubuntu:18.04 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-ubuntu-1804-v$(bun fetch:script-version)\" ../",
    "build:linux-aarch64-amazonlinux-2023": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/amazonlinux:2023 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-amazonlinux-2023-v$(bun fetch:script-version)\" ../",
    "build:linux-aarch64-amazonlinux-2": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/amazonlinux:2 --platform linux/arm64 --tag \"$(bun fetch:image-name):linux-aarch64-amazonlinux-2-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-debian-12": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/debian:12 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-debian-12-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-debian-11": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/debian:11 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-debian-11-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-debian-10": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/debian:10 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-debian-10-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-ubuntu-2404": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/ubuntu:24.04 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-ubuntu-2404-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-ubuntu-2204": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/ubuntu:22.04 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-ubuntu-2204-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-ubuntu-2004": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/ubuntu:20.04 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-ubuntu-2004-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-ubuntu-1804": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/ubuntu:18.04 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-ubuntu-1804-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-amazonlinux-2023": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/amazonlinux:2023 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-amazonlinux-2023-v$(bun fetch:script-version)\" ../",
    "build:linux-x64-amazonlinux-2": "docker build --progress=plain -f linux/Dockerfile --build-arg IMAGE=docker.io/library/amazonlinux:2 --platform linux/amd64 --tag \"$(bun fetch:image-name):linux-x64-amazonlinux-2-v$(bun fetch:script-version)\" ../",
    "build:darwin-aarch64-vanilla": "packer build '-only=*.bun-darwin-aarch64-vanilla' -var release=$(bun fetch:macos-version) darwin/",
    "build:darwin-aarch64-vanilla-15": "packer build '-only=*.bun-darwin-aarch64-vanilla' -var release=15 darwin/",
    "build:darwin-aarch64-vanilla-14": "packer build '-only=*.bun-darwin-aarch64-vanilla' -var release=14 darwin/",
    "build:darwin-aarch64-vanilla-13": "packer build '-only=*.bun-darwin-aarch64-vanilla' -var release=13 darwin/",
    "build:darwin-aarch64": "packer build '-only=*.bun-darwin-aarch64' -var release=$(bun fetch:macos-version) darwin/",
    "build:darwin-aarch64-15": "packer build '-only=*.bun-darwin-aarch64' -var release=15 darwin/",
    "build:darwin-aarch64-14": "packer build '-only=*.bun-darwin-aarch64' -var release=14 darwin/",
    "build:darwin-aarch64-13": "packer build '-only=*.bun-darwin-aarch64' -var release=13 darwin/",
    "test:linux-aarch64-debian-12": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-debian-12-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-aarch64-debian-11": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-debian-11-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun run build:ci && node scripts/runner.node.mjs --exec-path ./build/release-ci/bun'",
    "test:linux-aarch64-debian-10": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-debian-10-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-aarch64-ubuntu-2404": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-ubuntu-2404-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-aarch64-ubuntu-2204": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-ubuntu-2204-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-aarch64-ubuntu-2004": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-ubuntu-2004-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-aarch64-ubuntu-1804": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-ubuntu-1804-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-aarch64-amazonlinux-2023": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-amazonlinux-2023-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-aarch64-amazonlinux-2": "docker run --rm -it \"$(bun fetch:image-name):linux-aarch64-amazonlinux-2-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-x64-debian-12": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-debian-12-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-x64-debian-11": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-debian-11-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun run build:ci && node scripts/runner.node.mjs --exec-path ./build/release-ci/bun'",
    "test:linux-x64-debian-10": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-debian-10-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-x64-ubuntu-2404": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-ubuntu-2404-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-x64-ubuntu-2204": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-ubuntu-2204-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-x64-ubuntu-2004": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-ubuntu-2004-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-x64-ubuntu-1804": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-ubuntu-1804-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-x64-amazonlinux-2023": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-amazonlinux-2023-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "test:linux-x64-amazonlinux-2": "docker run --rm -it \"$(bun fetch:image-name):linux-x64-amazonlinux-2-v$(bun fetch:script-version)\" /bin/sh -c 'mkdir /workspace && cd /workspace && git clone https://github.com/oven-sh/bun bun && cd bun && bun upgrade --canary && node scripts/runner.node.mjs'",
    "publish:linux-aarch64-debian-12": "docker push \"$(bun fetch:image-name):linux-aarch64-debian-12-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-debian-11": "docker push \"$(bun fetch:image-name):linux-aarch64-debian-11-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-debian-10": "docker push \"$(bun fetch:image-name):linux-aarch64-debian-10-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-ubuntu-2404": "docker push \"$(bun fetch:image-name):linux-aarch64-ubuntu-2404-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-ubuntu-2204": "docker push \"$(bun fetch:image-name):linux-aarch64-ubuntu-2204-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-ubuntu-2004": "docker push \"$(bun fetch:image-name):linux-aarch64-ubuntu-2004-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-ubuntu-1804": "docker push \"$(bun fetch:image-name):linux-aarch64-ubuntu-1804-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-amazonlinux-2023": "docker push \"$(bun fetch:image-name):linux-aarch64-amazonlinux-2023-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-amazonlinux-2": "docker push \"$(bun fetch:image-name):linux-aarch64-amazonlinux-2-v$(bun fetch:script-version)\"",
    "publish:linux-x64-debian-12": "docker push \"$(bun fetch:image-name):linux-x64-debian-12-v$(bun fetch:script-version)\"",
    "publish:linux-x64-debian-11": "docker push \"$(bun fetch:image-name):linux-x64-debian-11-v$(bun fetch:script-version)\"",
    "publish:linux-x64-debian-10": "docker push \"$(bun fetch:image-name):linux-x64-debian-10-v$(bun fetch:script-version)\"",
    "publish:linux-x64-ubuntu-2404": "docker push \"$(bun fetch:image-name):linux-x64-ubuntu-2404-v$(bun fetch:script-version)\"",
    "publish:linux-x64-ubuntu-2204": "docker push \"$(bun fetch:image-name):linux-x64-ubuntu-2204-v$(bun fetch:script-version)\"",
    "publish:linux-x64-ubuntu-2004": "docker push \"$(bun fetch:image-name):linux-x64-ubuntu-2004-v$(bun fetch:script-version)\"",
    "publish:linux-x64-ubuntu-1804": "docker push \"$(bun fetch:image-name):linux-x64-ubuntu-1804-v$(bun fetch:script-version)\"",
    "publish:linux-x64-amazonlinux-2023": "docker push \"$(bun fetch:image-name):linux-x64-amazonlinux-2023-v$(bun fetch:script-version)\"",
    "publish:linux-x64-amazonlinux-2": "docker push \"$(bun fetch:image-name):linux-x64-amazonlinux-2-v$(bun fetch:script-version)\"",
    "publish:darwin-aarch64-vanilla": "image=$(tart list --format json | jq -r \".[] | select(.Name | test(\\\"^bun-darwin-aarch64-vanilla-.*-$(bun fetch:macos-version)$\\\")) | .Name\" | head -n 1 | sed 's/bun-//'); tart push \"bun-$image\" \"ghcr.io/oven-sh/bun-vm:$image-v$(bun fetch:darwin-version)\"",
    "publish:darwin-aarch64-vanilla-15": "tart push bun-darwin-aarch64-vanilla-sequoia-15 \"$(bun fetch:image-name):darwin-aarch64-vanilla-sequoia-15-v$(bun fetch:darwin-version)\"",
    "publish:darwin-aarch64-vanilla-14": "tart push bun-darwin-aarch64-vanilla-sonoma-14 \"$(bun fetch:image-name):darwin-aarch64-vanilla-sonoma-14-v$(bun fetch:darwin-version)\"",
    "publish:darwin-aarch64-vanilla-13": "tart push bun-darwin-aarch64-vanilla-ventura-13 \"$(bun fetch:image-name):darwin-aarch64-vanilla-ventura-13-v$(bun fetch:darwin-version)\"",
    "publish:darwin-aarch64": "image=$(tart list --format json | jq -r \".[] | select(.Name | test(\\\"^bun-darwin-aarch64-.*-$(bun fetch:macos-version)$\\\")) | .Name\" | head -n 1 | sed 's/bun-//'); tart push \"bun-$image\" \"ghcr.io/oven-sh/bun-vm:$image-v$(bun fetch:script-version)\"",
    "publish:darwin-aarch64-15": "tart push bun-darwin-aarch64-sequoia-15 \"$(bun fetch:image-name):darwin-aarch64-sequoia-15-v$(bun fetch:script-version)\"",
    "publish:darwin-aarch64-14": "tart push bun-darwin-aarch64-sonoma-14 \"$(bun fetch:image-name):darwin-aarch64-sonoma-14-v$(bun fetch:script-version)\"",
    "publish:darwin-aarch64-13": "tart push bun-darwin-aarch64-ventura-13 \"$(bun fetch:image-name):darwin-aarch64-ventura-13-v$(bun fetch:script-version)\""
  }
}
