{
  "private": true,
  "scripts": {
    "bootstrap": "brew install gh jq cirruslabs/cli/tart cirruslabs/cli/sshpass hashicorp/tap/packer && packer init darwin",
    "login": "token=$(gh auth token); username=$(gh api user --jq .login); echo \"Login as $username...\"; echo \"$token\" | tart login ghcr.io --username \"$username\" --password-stdin; echo \"$token\" | docker login ghcr.io --username \"$username\" --password-stdin",
    "fetch:image-name": "echo ghcr.io/oven-sh/bun-vm",
    "fetch:darwin-version": "echo 1",
    "fetch:macos-version": "sw_vers -productVersion | cut -d. -f1",
    "fetch:script-version": "cat ../scripts/bootstrap.sh | grep 'v=' | sed 's/v=\"//;s/\"//' | head -n 1",
    "build:linux": "./linux/scripts/build-image.sh",
    "build:linux-aarch64-debian-12": "bun build:linux aarch64 debian 12",
    "build:linux-aarch64-debian-11": "bun build:linux aarch64 debian 11",
    "build:linux-aarch64-debian-10": "bun build:linux aarch64 debian 10",
    "build:linux-aarch64-ubuntu-2404": "bun build:linux aarch64 ubuntu 24.04",
    "build:linux-aarch64-ubuntu-2204": "bun build:linux aarch64 ubuntu 22.04",
    "build:linux-aarch64-ubuntu-2004": "bun build:linux aarch64 ubuntu 20.04",
    "build:linux-aarch64-amazonlinux-2023": "bun build:linux aarch64 amazonlinux 2023",
    "build:linux-x64-debian-12": "bun build:linux x64 debian 12",
    "build:linux-x64-debian-11": "bun build:linux x64 debian 11",
    "build:linux-x64-debian-10": "bun build:linux x64 debian 10",
    "build:linux-x64-ubuntu-2404": "bun build:linux x64 ubuntu 24.04",
    "build:linux-x64-ubuntu-2204": "bun build:linux x64 ubuntu 22.04",
    "build:linux-x64-ubuntu-2004": "bun build:linux x64 ubuntu 20.04",
    "build:linux-x64-amazonlinux-2023": "bun build:linux x64 amazonlinux 2023",
    "build:darwin-aarch64-vanilla": "packer build '-only=*.bun-darwin-aarch64-vanilla' -var release=$(bun fetch:macos-version) darwin/",
    "build:darwin-aarch64-vanilla-15": "packer build '-only=*.bun-darwin-aarch64-vanilla' -var release=15 darwin/",
    "build:darwin-aarch64-vanilla-14": "packer build '-only=*.bun-darwin-aarch64-vanilla' -var release=14 darwin/",
    "build:darwin-aarch64-vanilla-13": "packer build '-only=*.bun-darwin-aarch64-vanilla' -var release=13 darwin/",
    "build:darwin-aarch64": "packer build '-only=*.bun-darwin-aarch64' -var release=$(bun fetch:macos-version) darwin/",
    "build:darwin-aarch64-15": "packer build '-only=*.bun-darwin-aarch64' -var release=15 darwin/",
    "build:darwin-aarch64-14": "packer build '-only=*.bun-darwin-aarch64' -var release=14 darwin/",
    "build:darwin-aarch64-13": "packer build '-only=*.bun-darwin-aarch64' -var release=13 darwin/",
    "publish:linux-aarch64-debian-12": "docker push \"$(bun fetch:image-name):linux-aarch64-debian-12-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-debian-11": "docker push \"$(bun fetch:image-name):linux-aarch64-debian-11-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-debian-10": "docker push \"$(bun fetch:image-name):linux-aarch64-debian-10-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-ubuntu-2404": "docker push \"$(bun fetch:image-name):linux-aarch64-ubuntu-2404-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-ubuntu-2204": "docker push \"$(bun fetch:image-name):linux-aarch64-ubuntu-2204-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-ubuntu-2004": "docker push \"$(bun fetch:image-name):linux-aarch64-ubuntu-2004-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-ubuntu-1804": "docker push \"$(bun fetch:image-name):linux-aarch64-ubuntu-1804-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-amazonlinux-2023": "docker push \"$(bun fetch:image-name):linux-aarch64-amazonlinux-2023-v$(bun fetch:script-version)\"",
    "publish:linux-aarch64-amazonlinux-2": "docker push \"$(bun fetch:image-name):linux-aarch64-amazonlinux-2-v$(bun fetch:script-version)\"",
    "publish:linux-x64-debian-12": "docker push \"$(bun fetch:image-name):linux-x64-debian-12-v$(bun fetch:script-version)\"",
    "publish:linux-x64-debian-11": "docker push \"$(bun fetch:image-name):linux-x64-debian-11-v$(bun fetch:script-version)\"",
    "publish:linux-x64-debian-10": "docker push \"$(bun fetch:image-name):linux-x64-debian-10-v$(bun fetch:script-version)\"",
    "publish:linux-x64-ubuntu-2404": "docker push \"$(bun fetch:image-name):linux-x64-ubuntu-2404-v$(bun fetch:script-version)\"",
    "publish:linux-x64-ubuntu-2204": "docker push \"$(bun fetch:image-name):linux-x64-ubuntu-2204-v$(bun fetch:script-version)\"",
    "publish:linux-x64-ubuntu-2004": "docker push \"$(bun fetch:image-name):linux-x64-ubuntu-2004-v$(bun fetch:script-version)\"",
    "publish:linux-x64-ubuntu-1804": "docker push \"$(bun fetch:image-name):linux-x64-ubuntu-1804-v$(bun fetch:script-version)\"",
    "publish:linux-x64-amazonlinux-2023": "docker push \"$(bun fetch:image-name):linux-x64-amazonlinux-2023-v$(bun fetch:script-version)\"",
    "publish:linux-x64-amazonlinux-2": "docker push \"$(bun fetch:image-name):linux-x64-amazonlinux-2-v$(bun fetch:script-version)\"",
    "publish:darwin-aarch64-vanilla": "image=$(tart list --format json | jq -r \".[] | select(.Name | test(\\\"^bun-darwin-aarch64-vanilla-.*-$(bun fetch:macos-version)$\\\")) | .Name\" | head -n 1 | sed 's/bun-//'); tart push \"bun-$image\" \"ghcr.io/oven-sh/bun-vm:$image-v$(bun fetch:darwin-version)\"",
    "publish:darwin-aarch64-vanilla-15": "tart push bun-darwin-aarch64-vanilla-sequoia-15 \"$(bun fetch:image-name):darwin-aarch64-vanilla-sequoia-15-v$(bun fetch:darwin-version)\"",
    "publish:darwin-aarch64-vanilla-14": "tart push bun-darwin-aarch64-vanilla-sonoma-14 \"$(bun fetch:image-name):darwin-aarch64-vanilla-sonoma-14-v$(bun fetch:darwin-version)\"",
    "publish:darwin-aarch64-vanilla-13": "tart push bun-darwin-aarch64-vanilla-ventura-13 \"$(bun fetch:image-name):darwin-aarch64-vanilla-ventura-13-v$(bun fetch:darwin-version)\"",
    "publish:darwin-aarch64": "image=$(tart list --format json | jq -r \".[] | select(.Name | test(\\\"^bun-darwin-aarch64-.*-$(bun fetch:macos-version)$\\\")) | .Name\" | head -n 1 | sed 's/bun-//'); tart push \"bun-$image\" \"ghcr.io/oven-sh/bun-vm:$image-v$(bun fetch:script-version)\"",
    "publish:darwin-aarch64-15": "tart push bun-darwin-aarch64-sequoia-15 \"$(bun fetch:image-name):darwin-aarch64-sequoia-15-v$(bun fetch:script-version)\"",
    "publish:darwin-aarch64-14": "tart push bun-darwin-aarch64-sonoma-14 \"$(bun fetch:image-name):darwin-aarch64-sonoma-14-v$(bun fetch:script-version)\"",
    "publish:darwin-aarch64-13": "tart push bun-darwin-aarch64-ventura-13 \"$(bun fetch:image-name):darwin-aarch64-ventura-13-v$(bun fetch:script-version)\""
  }
}
