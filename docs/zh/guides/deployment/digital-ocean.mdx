---
title: åœ¨ DigitalOcean ä¸Šéƒ¨ç½² Bun åº”ç”¨ç¨‹åº
sidebarTitle: åœ¨ DigitalOcean ä¸Šéƒ¨ç½²
mode: center
---

[DigitalOcean](https://www.digitalocean.com/) æ˜¯ä¸€ä¸ªäº‘å¹³å°ï¼Œä¸ºæ„å»ºå’Œéƒ¨ç½²åº”ç”¨ç¨‹åºæä¾›ä¸€ç³»åˆ—æœåŠ¡ã€‚

åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [Dockerfile] å°† Bun HTTP æœåŠ¡å™¨éƒ¨ç½²åˆ° DigitalOceanã€‚

<Note>
	åœ¨ç»§ç»­ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å…·å¤‡ï¼š

    - ä¸€ä¸ªå‡†å¤‡éƒ¨ç½²çš„ Bun åº”ç”¨ç¨‹åº
    - ä¸€ä¸ª [DigitalOcean è´¦æˆ·](https://www.digitalocean.com/)
    - å·²å®‰è£…å¹¶é…ç½® [DigitalOcean CLI](https://docs.digitalocean.com/reference/doctl/how-to/install/#step-1-install-doctl)
    - å·²å®‰è£… [Docker](https://docs.docker.com/get-started/get-docker/) å¹¶æ·»åŠ åˆ°æ‚¨çš„ `PATH`

</Note>

---

<Steps>
	<Step title="åˆ›å»ºæ–°çš„ DigitalOcean å®¹å™¨æ³¨å†Œè¡¨">
		åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨æ³¨å†Œè¡¨æ¥å­˜å‚¨ Docker é•œåƒã€‚

    	<Tabs>
    		<Tab title="é€šè¿‡ DigitalOcean ä»ªè¡¨æ¿">
    			åœ¨ DigitalOcean ä»ªè¡¨æ¿ä¸­ï¼Œè½¬åˆ° [**å®¹å™¨æ³¨å†Œè¡¨**](https://cloud.digitalocean.com/registry)ï¼Œå¹¶è¾“å…¥æ–°æ³¨å†Œè¡¨çš„è¯¦ç»†ä¿¡æ¯ã€‚

    			<Frame>
    				![DigitalOcean registry dashboard](/images/guides/digitalocean-7.png)
    			</Frame>

    			ç¡®ä¿è¯¦ç»†ä¿¡æ¯æ­£ç¡®ï¼Œç„¶åå•å‡» **åˆ›å»ºæ³¨å†Œè¡¨**ã€‚
    		</Tab>
    		<Tab title="é€šè¿‡ DigitalOcean CLI">

    			```bash terminal icon="terminal"
    			doctl registry create bun-digitalocean-demo
    			```
    			```txt
    			Name                     Endpoint                                           Region slug
    			bun-digitalocean-demo    registry.digitalocean.com/bun-digitalocean-demo    sfo2
    			```

    		</Tab>
    	</Tabs>

    	æ‚¨åº”è¯¥åœ¨ [**DigitalOcean æ³¨å†Œè¡¨ä»ªè¡¨æ¿**](https://cloud.digitalocean.com/registry) ä¸­çœ‹åˆ°æ–°æ³¨å†Œè¡¨ï¼š

    	<Frame>
    		![DigitalOcean registry dashboard](/images/guides/digitalocean-1.png)
    	</Frame>
    </Step>
    <Step title="åˆ›å»ºæ–°çš„ Dockerfile">
    	ç¡®ä¿æ‚¨åœ¨åŒ…å«é¡¹ç›®çš„ç›®å½•ä¸­ï¼Œç„¶ååœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ [Dockerfile]ã€‚æ­¤æ–‡ä»¶åŒ…å«åˆå§‹åŒ–å®¹å™¨ã€å°†æœ¬åœ°é¡¹ç›®æ–‡ä»¶å¤åˆ¶åˆ°å…¶ä¸­ã€å®‰è£…ä¾èµ–é¡¹å¹¶å¯åŠ¨åº”ç”¨ç¨‹åºçš„æŒ‡ä»¤ã€‚

    	```docker Dockerfile icon="docker"
    	# ä½¿ç”¨å®˜æ–¹ Bun é•œåƒè¿è¡Œåº”ç”¨ç¨‹åº
    	FROM oven/bun:debian

    	# å°†å·¥ä½œç›®å½•è®¾ç½®ä¸º `/app`
    	WORKDIR /app

    	# å°† package.json å’Œ bun.lock å¤åˆ¶åˆ°å®¹å™¨ä¸­
    	COPY package.json bun.lock ./

    	# å®‰è£…ä¾èµ–é¡¹
    	RUN bun install --production --frozen-lockfile

    	# å°†åº”ç”¨ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†å¤åˆ¶åˆ°å®¹å™¨ä¸­
    	COPY . .

    	# æš´éœ²ç«¯å£ (DigitalOcean å°†è®¾ç½® PORT ç¯å¢ƒå˜é‡)
    	EXPOSE 8080

    	# è¿è¡Œåº”ç”¨ç¨‹åº
    	CMD ["bun", "index.ts"]
    	```

    	<Note>
    		ç¡®ä¿å¯åŠ¨å‘½ä»¤å¯¹åº”äºåº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚å¦‚æœæ‚¨çš„ [package.json] ä¸­æœ‰å¯åŠ¨è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ˜¯ `CMD ["bun", "run", "start"]`ã€‚

    		æ­¤é•œåƒåœ¨å®¹å™¨å†…ä½¿ç”¨ Bun å®‰è£…ä¾èµ–é¡¹å¹¶è¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºæ²¡æœ‰ä¾èµ–é¡¹ï¼Œæ‚¨å¯ä»¥çœç•¥ `RUN bun install --production --frozen-lockfile` è¿™ä¸€è¡Œã€‚
    	</Note>

    	åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ [.dockerignore] æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶åŒ…å«åº”ä»å®¹å™¨é•œåƒä¸­_æ’é™¤_çš„æ–‡ä»¶å’Œç›®å½•ï¼Œä¾‹å¦‚ [node_modules]ã€‚è¿™ä½¿æ‚¨çš„æ„å»ºæ›´å¿«ã€æ›´å°ï¼š

    	```docker .dockerignore icon="Docker"
    	node_modules
    	Dockerfile*
    	.dockerignore
    	.git
    	.gitignore
    	README.md
    	LICENSE
    	.vscode
    	.env
    	# ä»»ä½•å…¶ä»–æ‚¨æƒ³è¦æ’é™¤çš„æ–‡ä»¶æˆ–ç›®å½•
    	```
    	```
    </Step>
    <Step title="ä½¿ç”¨ DigitalOcean æ³¨å†Œè¡¨å¯¹ Docker è¿›è¡Œèº«ä»½éªŒè¯">
    	åœ¨æ„å»ºå’Œæ¨é€ Docker é•œåƒä¹‹å‰ï¼Œä½¿ç”¨ DigitalOcean å®¹å™¨æ³¨å†Œè¡¨å¯¹ Docker è¿›è¡Œèº«ä»½éªŒè¯ï¼š

    	```bash terminal icon="terminal"
    	doctl registry login
    	```
    	```txt
    	Successfully authenticated with registry.digitalocean.com
    	```

    	<Note>
    		æ­¤å‘½ä»¤ä½¿ç”¨æ‚¨çš„ DigitalOcean å‡­æ®å¯¹ Docker ä¸ DigitalOcean çš„æ³¨å†Œè¡¨è¿›è¡Œèº«ä»½éªŒè¯ã€‚æ²¡æœ‰æ­¤æ­¥éª¤ï¼Œæ„å»ºå’Œæ¨é€å‘½ä»¤å°†å¤±è´¥å¹¶å‡ºç° 401 èº«ä»½éªŒè¯é”™è¯¯ã€‚
    	</Note>
    </Step>
    <Step title="æ„å»ºå¹¶å°† Docker é•œåƒæ¨é€åˆ° DigitalOcean æ³¨å†Œè¡¨">
    	ç¡®ä¿æ‚¨åœ¨åŒ…å« [Dockerfile] çš„ç›®å½•ä¸­ï¼Œç„¶ååœ¨ä¸€ä¸ªå‘½ä»¤ä¸­æ„å»ºå¹¶å°† Docker é•œåƒæ¨é€åˆ° DigitalOcean æ³¨å†Œè¡¨ï¼š

    	```bash terminal icon="terminal"
    	docker buildx build --platform=linux/amd64 -t registry.digitalocean.com/bun-digitalocean-demo/bun-digitalocean-demo:latest --push .
    	```

    	<Note>
    		å¦‚æœæ‚¨åœ¨ ARM Mac (M1/M2) ä¸Šæ„å»ºï¼Œåˆ™å¿…é¡»ä½¿ç”¨ `docker buildx` å’Œ `--platform=linux/amd64` ä»¥ç¡®ä¿ä¸ DigitalOcean åŸºç¡€è®¾æ–½çš„å…¼å®¹æ€§ã€‚ä½¿ç”¨ `docker build` è€Œä¸å¸¦å¹³å°æ ‡å¿—å°†åˆ›å»ºä¸€ä¸ªåœ¨ DigitalOcean ä¸Šæ— æ³•è¿è¡Œçš„ ARM64 é•œåƒã€‚
    	</Note>

    	é•œåƒæ¨é€åï¼Œæ‚¨åº”è¯¥åœ¨ [**DigitalOcean æ³¨å†Œè¡¨ä»ªè¡¨æ¿**](https://cloud.digitalocean.com/registry) ä¸­çœ‹åˆ°å®ƒï¼š

    	<Frame>
    		![DigitalOcean registry dashboard](/images/guides/digitalocean-2.png)
    	</Frame>
    </Step>
    <Step title="åˆ›å»ºæ–°çš„ DigitalOcean App Platform é¡¹ç›®">
    	åœ¨ DigitalOcean ä»ªè¡¨æ¿ä¸­ï¼Œè½¬åˆ° [**App Platform**](https://cloud.digitalocean.com/apps) > **åˆ›å»ºåº”ç”¨**ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä»å®¹å™¨é•œåƒåˆ›å»ºä¸€ä¸ªé¡¹ç›®ã€‚

    	<Frame>
    		![DigitalOcean App Platform project dashboard](/images/guides/digitalocean-3.png)
    	</Frame>

    	ç¡®ä¿è¯¦ç»†ä¿¡æ¯æ­£ç¡®ï¼Œç„¶åå•å‡» **ä¸‹ä¸€æ­¥**ã€‚

    	<Frame>
    		![DigitalOcean App Platform service dashboard](/images/guides/digitalocean-4.png)
    	</Frame>

    	æŸ¥çœ‹å¹¶é…ç½®èµ„æºè®¾ç½®ï¼Œç„¶åå•å‡» **åˆ›å»ºåº”ç”¨**ã€‚

    	<Frame>
    		![DigitalOcean App Platform service dashboard](/images/guides/digitalocean-6.png)
    	</Frame>
    </Step>
    <Step title="è®¿é—®æ‚¨çš„å®æ—¶åº”ç”¨ç¨‹åº">
    	ğŸ¥³ æ‚¨çš„åº”ç”¨ç°åœ¨å·²ä¸Šçº¿ï¼åº”ç”¨åˆ›å»ºåï¼Œæ‚¨åº”è¯¥åœ¨ App Platform ä»ªè¡¨æ¿ä¸­çœ‹åˆ°å®ƒä»¥åŠå…¬å…± URLã€‚

    	<Frame>
    		![DigitalOcean App Platform app dashboard](/images/guides/digitalocean-5.png)
    	</Frame>
    </Step>

</Steps>
