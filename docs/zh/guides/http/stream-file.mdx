---
title: 将文件作为 HTTP 响应流式传输
sidebarTitle: 流式传输文件响应
mode: center
---

此代码片段使用 [`Bun.file()`](/runtime/file-io#reading-files-bun-file) 从磁盘读取文件。这将返回一个 `BunFile` 实例，可以直接传递给 `new Response` 构造函数。

```ts server.ts icon="/icons/typescript.svg"
const path = "/path/to/file.txt";
const file = Bun.file(path);
const resp = new Response(file);
```

---

`Content-Type` 从文件中读取并自动设置到 `Response` 上。

```ts server.ts icon="/icons/typescript.svg"
new Response(Bun.file("./package.json")).headers.get("Content-Type");
// => application/json;charset=utf-8

new Response(Bun.file("./test.txt")).headers.get("Content-Type");
// => text/plain;charset=utf-8

new Response(Bun.file("./index.tsx")).headers.get("Content-Type");
// => text/javascript;charset=utf-8

new Response(Bun.file("./img.png")).headers.get("Content-Type");
// => image/png
```

---

使用 [`Bun.serve()`](/runtime/http/server) 将所有内容组合在一起。

```ts server.ts icon="/icons/typescript.svg"
// 静态文件服务器
Bun.serve({
  async fetch(req) {
    const path = new URL(req.url).pathname;
    const file = Bun.file(path);
    return new Response(file);
  },
});
```

---

请参阅 [文档 > API > 文件 I/O](/runtime/file-io#writing-files-bun-write) 以获取 `Bun.write()` 的完整文档。
