var u=function(E){return typeof E=="string"},r=function(E){return typeof E=="object"&&E!==null},L=function(E){return E===null},e=function(E){return E==null};var f=function(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null},D0=function(E,V,X){if(E&&r(E)&&E instanceof f)return E;var k=new f;return k.parse(E,V,X),k},F0=function(E){return u(E)&&(E=D0(E)),E instanceof f?E.format():f.prototype.format.call(E)},G0=function(E,V){return D0(E,!1,!0).resolve(V)},H0=function(E,V){return E?D0(E,!1,!0).resolveObject(V):V},{URL:g,URLSearchParams:x,[Symbol.for("Bun.lazy")]:v}=globalThis,h=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,t=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,E0=["<",">",'"',"`"," ","\r",`
`,"	"],V0=["{","}","|","\\","^","`"].concat(E0),m=["'"].concat(V0),d=["%","/","?",";","#"].concat(m),n=["/","?","#"],X0=255,p=/^[+a-z0-9A-Z_-]{0,63}$/,k0=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w0={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},q={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O={parse(E){var V=decodeURIComponent;return(E+"").replace(/\+/g," ").split("&").filter(Boolean).reduce(function(X,k,w){var D=k.split("="),F=V(D[0]||""),G=V(D[1]||""),H=X[F];return X[F]=H===void 0?G:[].concat(H,G),X},{})},stringify(E){var V=encodeURIComponent;return Object.keys(E||{}).reduce(function(X,k){return[].concat(E[k]).forEach(function(w){X.push(V(k)+"="+V(w))}),X},[]).join("&").replace(/\s/g,"+")}};f.prototype.parse=function(E,V,X){if(!u(E))throw new TypeError("Parameter 'url' must be a string, not "+typeof E);var k=E.indexOf("?"),w=k!==-1&&k<E.indexOf("#")?"?":"#",D=E.split(w),F=/\\/g;D[0]=D[0].replace(F,"/"),E=D.join(w);var G=E;if(G=G.trim(),!X&&E.split("#").length===1){var H=t.exec(G);if(H)return this.path=G,this.href=G,this.pathname=H[1],H[2]?(this.search=H[2],V?this.query=O.parse(this.search.substr(1)):this.query=this.search.substr(1)):V&&(this.search="",this.query={}),this}var J=h.exec(G);if(J){J=J[0];var K=J.toLowerCase();this.protocol=K,G=G.substr(J.length)}if(X||J||G.match(/^\/\/[^@\/]+@[^@\/]+/)){var M=G.substr(0,2)==="//";M&&!(J&&y[J])&&(G=G.substr(2),this.slashes=!0)}if(!y[J]&&(M||J&&!q[J])){for(var Q=-1,S=0;S<n.length;S++){var W=G.indexOf(n[S]);W!==-1&&(Q===-1||W<Q)&&(Q=W)}var $,B;Q===-1?B=G.lastIndexOf("@"):B=G.lastIndexOf("@",Q),B!==-1&&($=G.slice(0,B),G=G.slice(B+1),this.auth=decodeURIComponent($)),Q=-1;for(var S=0;S<d.length;S++){var W=G.indexOf(d[S]);W!==-1&&(Q===-1||W<Q)&&(Q=W)}Q===-1&&(Q=G.length),this.host=G.slice(0,Q),G=G.slice(Q),this.parseHost(),this.hostname=this.hostname||"";var N=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!N)for(var T=this.hostname.split(/\./),S=0,Y=T.length;S<Y;S++){var Z=T[S];if(!!Z&&!Z.match(p)){for(var a="",I=0,_=Z.length;I<_;I++)Z.charCodeAt(I)>127?a+="x":a+=Z[I];if(!a.match(p)){var l=T.slice(0,S),o=T.slice(S+1),z=Z.match(k0);z&&(l.push(z[1]),o.unshift(z[2])),o.length&&(G="/"+o.join(".")+G),this.hostname=l.join(".");break}}}this.hostname.length>X0?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=new g(`https://${this.hostname}`).hostname);var P=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+P,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),G[0]!=="/"&&(G="/"+G))}if(!w0[K])for(var S=0,Y=m.length;S<Y;S++){var R=m[S];if(G.indexOf(R)!==-1){var U=encodeURIComponent(R);U===R&&(U=escape(R)),G=G.split(R).join(U)}}var j=G.indexOf("#");j!==-1&&(this.hash=G.substr(j),G=G.slice(0,j));var C=G.indexOf("?");if(C!==-1?(this.search=G.substr(C),this.query=G.substr(C+1),V&&(this.query=O.parse(this.query)),G=G.slice(0,C)):V&&(this.search="",this.query={}),G&&(this.pathname=G),q[K]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",b=this.search||"";this.path=P+b}return this.href=this.format(),this};f.prototype.format=function(){var E=this.auth||"";E&&(E=encodeURIComponent(E),E=E.replace(/%3A/i,":"),E+="@");var V=this.protocol||"",X=this.pathname||"",k=this.hash||"",w=!1,D="";this.host?w=E+this.host:this.hostname&&(w=E+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(w+=":"+this.port)),this.query&&r(this.query)&&Object.keys(this.query).length&&(D=O.stringify(this.query));var F=this.search||D&&"?"+D||"";return V&&V.substr(-1)!==":"&&(V+=":"),this.slashes||(!V||q[V])&&w!==!1?(w="//"+(w||""),X&&X.charAt(0)!=="/"&&(X="/"+X)):w||(w=""),k&&k.charAt(0)!=="#"&&(k="#"+k),F&&F.charAt(0)!=="?"&&(F="?"+F),X=X.replace(/[?#]/g,function(G){return encodeURIComponent(G)}),F=F.replace("#","%23"),V+w+X+F+k};f.prototype.resolve=function(E){return this.resolveObject(D0(E,!1,!0)).format()};f.prototype.resolveObject=function(E){if(u(E)){var V=new f;V.parse(E,!1,!0),E=V}for(var X=new f,k=Object.keys(this),w=0;w<k.length;w++){var D=k[w];X[D]=this[D]}if(X.hash=E.hash,E.href==="")return X.href=X.format(),X;if(E.slashes&&!E.protocol){for(var F=Object.keys(E),G=0;G<F.length;G++){var H=F[G];H!=="protocol"&&(X[H]=E[H])}return q[X.protocol]&&X.hostname&&!X.pathname&&(X.path=X.pathname="/"),X.href=X.format(),X}if(E.protocol&&E.protocol!==X.protocol){if(!q[E.protocol]){for(var J=Object.keys(E),K=0;K<J.length;K++){var M=J[K];X[M]=E[M]}return X.href=X.format(),X}if(X.protocol=E.protocol,!E.host&&!y[E.protocol]){for(var Y=(E.pathname||"").split("/");Y.length&&!(E.host=Y.shift()););E.host||(E.host=""),E.hostname||(E.hostname=""),Y[0]!==""&&Y.unshift(""),Y.length<2&&Y.unshift(""),X.pathname=Y.join("/")}else X.pathname=E.pathname;if(X.search=E.search,X.query=E.query,X.host=E.host||"",X.auth=E.auth,X.hostname=E.hostname||E.host,X.port=E.port,X.pathname||X.search){var Q=X.pathname||"",S=X.search||"";X.path=Q+S}return X.slashes=X.slashes||E.slashes,X.href=X.format(),X}var W=X.pathname&&X.pathname.charAt(0)==="/",$=E.host||E.pathname&&E.pathname.charAt(0)==="/",B=$||W||X.host&&E.pathname,N=B,T=X.pathname&&X.pathname.split("/")||[],Y=E.pathname&&E.pathname.split("/")||[],Z=X.protocol&&!q[X.protocol];if(Z&&(X.hostname="",X.port=null,X.host&&(T[0]===""?T[0]=X.host:T.unshift(X.host)),X.host="",E.protocol&&(E.hostname=null,E.port=null,E.host&&(Y[0]===""?Y[0]=E.host:Y.unshift(E.host)),E.host=null),B=B&&(Y[0]===""||T[0]==="")),$)X.host=E.host||E.host===""?E.host:X.host,X.hostname=E.hostname||E.hostname===""?E.hostname:X.hostname,X.search=E.search,X.query=E.query,T=Y;else if(Y.length)T||(T=[]),T.pop(),T=T.concat(Y),X.search=E.search,X.query=E.query;else if(!e(E.search)){if(Z){X.hostname=X.host=T.shift();var a=X.host&&X.host.indexOf("@")>0?X.host.split("@"):!1;a&&(X.auth=a.shift(),X.host=X.hostname=a.shift())}return X.search=E.search,X.query=E.query,(!L(X.pathname)||!L(X.search))&&(X.path=(X.pathname?X.pathname:"")+(X.search?X.search:"")),X.href=X.format(),X}if(!T.length)return X.pathname=null,X.search?X.path="/"+X.search:X.path=null,X.href=X.format(),X;for(var I=T.slice(-1)[0],_=(X.host||E.host||T.length>1)&&(I==="."||I==="..")||I==="",l=0,o=T.length;o>=0;o--)I=T[o],I==="."?T.splice(o,1):I===".."?(T.splice(o,1),l++):l&&(T.splice(o,1),l--);if(!B&&!N)for(;l--;l)T.unshift("..");B&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),_&&T.join("/").substr(-1)!=="/"&&T.push("");var z=T[0]===""||T[0]&&T[0].charAt(0)==="/";if(Z){X.hostname=X.host=z?"":T.length?T.shift():"";var a=X.host&&X.host.indexOf("@")>0?X.host.split("@"):!1;a&&(X.auth=a.shift(),X.host=X.hostname=a.shift())}return B=B||X.host&&T.length,B&&!z&&T.unshift(""),T.length?X.pathname=T.join("/"):(X.pathname=null,X.path=null),(!L(X.pathname)||!L(X.search))&&(X.path=(X.pathname?X.pathname:"")+(X.search?X.search:"")),X.auth=E.auth||X.auth,X.slashes=X.slashes||E.slashes,X.href=X.format(),X},f.prototype.parseHost=function(){var E=this.host,V=s.exec(E);V&&(V=V[0],V!==":"&&(this.port=V.substr(1)),E=E.substr(0,E.length-V.length)),E&&(this.hostname=E)};var J0,K0;v&&(J0=v("pathToFileURL"),K0=v("fileURLToPath"));var M0={parse:D0,resolve:G0,resolveObject:H0,format:F0,Url:f,pathToFileURL:J0,fileURLToPath:K0,URL:g,URLSearchParams:x};export{H0 as resolveObject,G0 as resolve,J0 as pathToFileURL,D0 as parse,F0 as format,K0 as fileURLToPath,M0 as default,f as Url,x as URLSearchParams,g as URL};
